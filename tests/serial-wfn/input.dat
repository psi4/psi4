#! A simple hf/cc-pvdz water calculation. The resulting wavefunction is written to a file, and then a new wavefunction is generated from that file. The  member variables of both wavefunctions should be identical in value


molecule mol {
0 1
O 0.0 0.0 0.0
H 1.0 0.0 0.0
H -.7 0.7 0.0
}

set {
    basis cc-pvdz
    guess sad
}

# make a wavefunction
e, wfn_old = energy('hf', return_wfn=True)

# write the wavefunction to file
Wavefunction.to_file(wfn_old, 'my_wfn')

# read wavefunction from file
wfn_new = Wavefunction.from_file('my_wfn')

compare_wavefunctions(wfn_old, wfn_new, 'Serialization Check 1') #TEST

# alternatively store the dict representation of the wavefunction in memory
wfn_dict = Wavefunction.to_file(wfn_old)

# make a wavefunction from the dict
wfn_new2 = Wavefunction.from_file(wfn_dict)

compare_wavefunctions(wfn_old, wfn_new2, 'Serialization Check 2') #TEST



